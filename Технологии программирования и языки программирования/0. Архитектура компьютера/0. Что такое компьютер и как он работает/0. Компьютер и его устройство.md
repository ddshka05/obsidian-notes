### Что такое компьютер
**Компьютер** - это средство вычисления (вычислительная машина), вещь, которая оперирует числами. Таким образом, логарифмическая линейка (то есть аналоговые вычислители) - это такой же компьютер.

Мы будем рассматривать только цифровые программируемые вычислители. 
### Архитектура фон Неймана
![[Pasted image 20250628103703.png]]

То есть на вход подаются данные, которые необходимо считать. Внутри должны произойти арифметические операции, которые производятся arifm / logic unit (+ - * /), также есть control unit, который говорит, что делать юниту арифметическому. Также есть память, которая состоит из ячеек одинакового размера, у каждой ячейки есть физический адрес. 

CPU - центральный процессор.

Принципы машины фон-Неймана (или принципы Принстонской архитектуры): 
- электронный, цифровой (только за счет этого можно сделать вычисления быстрыми)
- адресуемая память — набор одинаковых пронумерованных ячеек (это про ОЗУ, можно в любой момент получить или записать информацию)
- хранимая программа в виде набора инструкций (в той же памяти хранится программа, хранится в виде числа от 0 до 255)
	 Это отражает концепцию хранимой программы (stored-programm)
- инструкции исполняются по одной, в определённой последовательности; есть IP — instruction pointer (внутри Control Unit), ячейка памяти внутри control unit, где хранится адрес текущей инструкции, которую надо выполнить;
	 То есть за один момент времени мы смотрим в одну область памяти, исполняет одну программу. 
- инструкции и данные хранятся в одной и той же памяти, инструкции можно обрабатывать как данные.

![[Pasted image 20250628104721.png]]
На этой картинке можно заметить, что шина одна! Одна и та же _шина памяти_ используется для передачи инструкций и данных. 
### Как исполняются программы в компьютере
Типичный шаг исполнения программы:
- **fetch** — из памяти по адресу, который лежит в IP, приносим следующую инструкцию;
- **decode** — определяем, как она будет исполняться;
- **execute** — исполнение:
    - производим вычисления и обновляем операнды;
    - обновляем instruction pointer. (чтобы указывал на следующую область памяти, обычно увеличиваем).

Это так называемая instruction pipeline

Но нам этого не хватает, потому что нам надо иметь логический блок (чтобы код программы менялся из-за данных), а также надо уметь делать циклы! Получается кроме арифм. инструкций у нас должны появиться ещё инструкции, которые помогут изменять поток исполнения команд.

Это в машине фон Неймана это реализуется через изменения IP. Например бесконечный цикл можно реализовать вот так:
![[Pasted image 20250628105513.png]]
То есть процессор смотрит в ячейку 247, потом получает команду прибавить к x единицу, декодирует, исполняет, обновляет IP на единицу прибавляя, потом получает следующую команду перепрыгнуть (безусловно перейти) на 247 ячейку и так далее. Получили цикл. 

Получается, у нас есть стандартизованный набор инструкций, который мы можем по ячейкам раскидывать и тем самым реализовывать любые конечные программы. 
### Чем отличаются компьютеры
Компьютеры могут отличаться в том, как кодируются их команды, как выглядит их семантика и способы кодирования.

**ISA** (instruction set architecture) — набор инструкций конкретного компьютера, их семантика и способ кодирования в памяти. Примеры ISA: x86, ARM (наш телефон сделан на семействе именно этой, или вот макбуки новые!), MIPS (роутер мб сделан на этой архитектуре), RISC-V.

Компьютеры (или процессоры) с одинаковой ISA могут быть по-разному устроены на уровне _микроархитектуры_ (например Intel и AMD выпускают процессоры с одинаковой архитектурой, но разными характеристиками)— от этого может зависеть скорость или эффективность исполнения программ.

Мы будем рассматривать архитектуру x86. 

Также существует Гарвардская архитектура, которая борется с проблемой von Neyman bolttleneck - то есть проблемой использования одной шиной для взаимодействия с данными, командами. [ссылка]([https://en.wikipedia.org/wiki/Harvard_architecture](https://en.wikipedia.org/wiki/Harvard_architecture))



# Как работает аппаратный стек

